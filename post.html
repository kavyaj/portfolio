<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Writing - Kavya Jahagirdar</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Big+Shoulders+Display:wght@400;500;600;700;800;900&family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        .post-content {
            font-family: 'DM Sans', sans-serif;
            line-height: 1.7;
            color: #374151;
        }
        .post-content h1, .post-content h2 {
            font-family: 'Big Shoulders Display', sans-serif;
            color: #fd5183;
            margin-top: 2rem;
            margin-bottom: 1rem;
        }
        .post-content h3, .post-content h4 {
            font-family: 'DM Sans', sans-serif;
            color: #111827;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
        }
        .post-content p {
            margin-bottom: 1.25rem;
        }
        .post-content code {
            background: #f3f4f6;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.875rem;
        }
        .post-content pre {
            background: #f3f4f6;
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1.5rem 0;
        }
        .post-content blockquote {
            border-left: 4px solid #fd5183;
            padding-left: 1rem;
            margin: 1.5rem 0;
            font-style: italic;
            color: #6b7280;
        }
        .post-content ul, .post-content ol {
            margin-bottom: 1.25rem;
            padding-left: 1.5rem;
        }
        .post-content li {
            margin-bottom: 0.5rem;
        }
        .post-meta {
            border-bottom: 1px solid #e5e7eb;
            padding-bottom: 1.5rem;
            margin-bottom: 2rem;
        }
        .post-title {
            font-family: 'Big Shoulders Display', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: #fd5183;
            margin-bottom: 1rem;
            line-height: 1.2;
        }
        .post-date {
            font-size: 0.875rem;
            color: #6b7280;
        }
        .back-to-blog {
            display: inline-flex;
            align-items: center;
            color: #fd5183;
            text-decoration: none;
            font-weight: 500;
            margin-bottom: 2rem;
        }
        .back-to-blog:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <main style="max-width: 800px; margin: 0 auto; padding: 2rem;">
        <a href="/blog.html" class="back-to-blog">← Back to Writings</a>
        
        <article id="blog-post">
            <div style="text-align: center; padding: 2rem;">
                <p>Loading post...</p>
            </div>
        </article>
    </main>

    <script>
        async function loadBlogPost() {
            try {
                const urlParams = new URLSearchParams(window.location.search);
                const slug = urlParams.get('slug');
                
                if (!slug) {
                    throw new Error('No post slug provided');
                }

                const response = await fetch('/posts.json');
                const data = await response.json();
                const post = data.posts.find(p => p.slug === slug && p.published);
                
                if (!post) {
                    throw new Error('Post not found');
                }
                
                // Simple markdown parser for basic formatting
                function parseMarkdown(text) {
                    return text
                        .replace(/^# (.*$)/gim, '<h1>$1</h1>')
                        .replace(/^## (.*$)/gim, '<h2>$1</h2>')
                        .replace(/^### (.*$)/gim, '<h3>$1</h3>')
                        .replace(/^\* (.*$)/gim, '<li>$1</li>')
                        .replace(/^(\d+)\. (.*$)/gim, '<li>$1. $2</li>')
                        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                        .replace(/\*(.*?)\*/g, '<em>$1</em>')
                        .replace(/\n\n/g, '</p><p>')
                        .replace(/^(?!<[hl])/gm, '<p>')
                        .replace(/(<\/[hl][1-6]>)\s*<p>/g, '$1')
                        .replace(/<p>\s*(<[hl][1-6]>)/g, '$1')
                        .replace(/<p>\s*(<li>)/g, '<ul>$1')
                        .replace(/(<\/li>)\s*<p>/g, '$1</ul>');
                }
                
                // Update page title
                document.title = `${post.title} - Kavya Jahagirdar`;
                
                // Render post
                document.getElementById('blog-post').innerHTML = `
                    <div class="post-meta">
                        <h1 class="post-title">${post.title}</h1>
                        <div class="post-date">
                            ${new Date(post.created_at).toLocaleDateString('en-US', {
                                year: 'numeric',
                                month: 'long',
                                day: 'numeric'
                            })}
                        </div>
                    </div>
                    <div class="post-content">
                        ${parseMarkdown(post.content)}
                    </div>
                `;1>
                        <div class="post-date">
                            Published on ${new Date(post.created_at).toLocaleDateString('en-US', {
                                year: 'numeric',
                                month: 'long',
                                day: 'numeric'
                            })}
                        </div>
                    </div>
                    <div class="post-content">
                        ${post.content}
                    </div>
                `;
            } catch (error) {
                console.error('Error loading blog post:', error);
                document.getElementById('blog-post').innerHTML = `
                    <div style="text-align: center; padding: 3rem;">
                        <h2 class="content-heading-large">Post Not Found</h2>
                        <p class="body-text">The post you're looking for doesn't exist or has been removed.</p>
                        <a href="/blog.html" class="link-primary">← Back to Blog</a>
                    </div>
                `;
            }
        }

        document.addEventListener('DOMContentLoaded', loadBlogPost);
    </script>
</body>
</html>